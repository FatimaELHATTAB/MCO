Document dâ€™Architecture â€“ Validation TVA via VIES API
RÃ©digÃ© par : Tima
Date : Juillet 2025
Destinataires : Ã‰quipe Architecture SÃ©curitÃ©
Objet : Validation des numÃ©ros de TVA via lâ€™API REST officielle VIES

1. Contexte
Actuellement, la validation des numÃ©ros de TVA intra-UE est effectuÃ©e manuellement via le site VIES de la Commission europÃ©enne, par traitement batch. Ce mode opÃ©ratoire est :

non traÃ§able,

non sÃ©curisÃ©,

sujet Ã  des erreurs humaines.

Nous proposons une automatisation maÃ®trisÃ©e via lâ€™API REST officielle VIES, dans un cadre sÃ©curisÃ©, sans exposition externe, et conforme aux standards du groupe.

2. RÃ©sumÃ© de la solution technique
Ã‰lÃ©ment	DÃ©tail
API consommÃ©e	https://ec.europa.eu/taxation_customs/vies/rest-api/check-vat-number
Type de requÃªte	POST en HTTPS (sans authentification, accÃ¨s public contrÃ´lÃ©)
Payload envoyÃ©	NumÃ©ro TVA + pays + identifiant dÃ©clarant
DonnÃ©es sensibles ?	Non â€“ TVA publique, pas de donnÃ©es personnelles
Nature de la donnÃ©e	Publiquement vÃ©rifiable (service de lâ€™UE)
Mode dâ€™appel	Appel unitaire, depuis script interne Python (pas dâ€™exÃ©cution cÃ´tÃ© client)
FrÃ©quence des appels	Ã€ la demande (ex : onboarding fournisseur, traitement factures)
Stockage	RÃ©sultats loguÃ©s localement, pas de rÃ©plication du service

3. SÃ©curitÃ© et conformitÃ©
Aspect	Dispositif mis en place
Authentification API	Pas nÃ©cessaire â€“ API publique de lâ€™UE
Connexion sortante	ContrÃ´le rÃ©seau : whitelist explicite de lâ€™URL VIES
Chiffrement	HTTPS uniquement (obligatoire, pas dâ€™alternative HTTP)
Passthrough data	Aucune donnÃ©e sensible stockÃ©e ou exposÃ©e
Risques identifiÃ©s	- Risque de dÃ©ni de service externe (mitigÃ© par retry/backoff)
- Risque d'indisponibilitÃ© ponctuelle du service
Logging	Journalisation interne horodatÃ©e (request / response minimale)
AuditabilitÃ©	Appels horodatÃ©s et centralisÃ©s, traÃ§abilitÃ© garantie

4. Points de vigilance
âŒ Lâ€™API ne gÃ¨re pas les vÃ©rifications par lot â†’ enchaÃ®nement sÃ©quentiel implÃ©mentÃ© avec pause.

ğŸ“¶ Pas de garantie de service (SLA) de la part de la Commission europÃ©enne â†’ mode best effort.

âš ï¸ Informations retournÃ©es (nom/adresse) peuvent varier selon lâ€™Ã‰tat membre.

5. Exemple dâ€™utilisation
ğŸ”¸ RequÃªte (payload JSON)
json
Copier
Modifier
{
  "countryCode": "FR",
  "vatNumber": "12345678901",
  "requesterMemberStateCode": "FR",
  "requesterNumber": "12345678901"
}
ğŸ”¹ RÃ©ponse (exemple)
json
Copier
Modifier
{
  "countryCode": "FR",
  "vatNumber": "12345678901",
  "requestDate": "2025-07-02T15:32:10.000Z",
  "valid": true,
  "name": "SociÃ©tÃ© XYZ",
  "address": "10 rue Exemple, Paris"
}
6. Ressources officielles
ğŸŒ Site officiel VIES :
https://ec.europa.eu/taxation_customs/vies

ğŸ“„ SpÃ©cification OpenAPI (Swagger) :
https://ec.europa.eu/assets/taxud/vow-information/swagger_publicVAT.yaml

ğŸ’» Exemple dâ€™implÃ©mentation (PHP SDK) :
https://github.com/rocketfellows/vies-vat-validation-php-sdk-rest

