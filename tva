#!/bin/bash
# create_project_structure.sh
# Script pour créer l'arborescence du moteur de matching

BASE_DIR="matching_engine"

mkdir -p $BASE_DIR/{config/{envs,providers},src/{core,utils,cli},tests/{unit,integration,regression/data},docker}

# Fichiers de config
touch $BASE_DIR/config/envs/dev.yaml
touch $BASE_DIR/config/envs/prod.yaml
touch $BASE_DIR/config/providers/base.yaml
touch $BASE_DIR/config/providers/sustain.yaml

# Code source
touch $BASE_DIR/src/core/{pipeline.py,exact_matcher.py,fuzzy_matcher.py,tie_breaker.py,rules_loader.py,db_io.py}
touch $BASE_DIR/src/utils/{logger.py,timer.py,normalizer.py,vault_client.py}
touch $BASE_DIR/src/cli/entrypoint.py
touch $BASE_DIR/src/__init__.py

# Tests
touch $BASE_DIR/tests/unit/{test_exact_matcher.py,test_fuzzy_matcher.py,test_tie_breaker.py,test_rules_loader.py,test_db_io.py,test_normalizer.py}
touch $BASE_DIR/tests/integration/test_pipeline_end_to_end.py
touch $BASE_DIR/tests/regression/test_regression.py
touch $BASE_DIR/tests/regression/data/{rmpm_sample.csv,sustain_sample.csv,expected_matches.csv}

# Racine
touch $BASE_DIR/{matching_prod_algorithm.py,Dockerfile,pyproject.toml,Makefile}

echo "✅ Arborescence créée sous $BASE_DIR"
